<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by OpenOffice.org - see http://xml.openoffice.org/odf2xhtml for more info.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xmlns:ns_1="http://www.w3.org/XML/1998/namespace" ns_1:lang="en-US">- no title specified</title><meta xmlns:ns_1="http://www.w3.org/XML/1998/namespace" name="DCTERMS.title" content="" ns_1:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.creator" content="Tyler Folsom"/><meta name="DCTERMS.issued" content="2016-11-01T14:54:53" scheme="DCTERMS.W3CDTF"/><meta xmlns:ns_1="http://www.w3.org/XML/1998/namespace" name="DCTERMS.provenance" content="" ns_1:lang="en-US"/><meta xmlns:ns_1="http://www.w3.org/XML/1998/namespace" name="DCTERMS.subject" content="," ns_1:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.P1 { font-size:12pt; font-family:Times New Roman; writing-mode:lr-tb; }
	.P2 { font-size:12pt; font-family:Times New Roman; writing-mode:lr-tb; }
	.P3 { font-size:12pt; font-family:Times New Roman; writing-mode:lr-tb; }
	.Standard { font-size:12pt; font-family:Times New Roman; writing-mode:lr-tb; }
	<!-- ODF styles with no properties representable as CSS -->
	.T1 { }
	</style></head><body dir="ltr" style="max-width:8.5in;margin-top:0.7874in; margin-bottom:0.7874in; margin-left:0.7874in; margin-right:0.7874in; writing-mode:lr-tb; "><p class="P3">Power-On<span class="T1"> </span>Circuit</p><p class="Standard"> </p><p class="Standard">This<span class="T1"> </span>file:<span class="T1"> </span>PowerOnCircuit.doc</p><p class="Standard">Other<span class="T1"> </span>files:<span class="T1"> </span>PowerOn.sch,<span class="T1"> </span>.brd;<span class="T1"> </span></p><p class="Standard">Wiring_C2PCB.xls<span class="T1"> </span>Power<span class="T1"> </span>tab.</p><p class="Standard"> </p><p class="Standard">The<span class="T1"> </span>power-on<span class="T1"> </span>circuit<span class="T1"> </span>serves<span class="T1"> </span>several<span class="T1"> </span>functions</p><ol><li><p class="P1" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">1.</span>It<span class="T1"> </span>provides<span class="T1"> </span>the<span class="T1"> “</span>pre-charge<span class="T1">” </span>resistor,<span class="T1"> </span>switch<span class="T1"> </span>and<span class="T1"> </span>relay<span class="T1"> </span>needed<span class="T1"> </span>for<span class="T1"> </span>Kelly<span class="T1"> </span>XBS.<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">2.</span>It<span class="T1"> </span>handles<span class="T1"> </span>emergency-stop<span class="T1"> </span>by<span class="T1"> </span>removing<span class="T1"> </span>36V<span class="T1"> </span>power<span class="T1"> </span>and<span class="T1"> </span>applying<span class="T1"> </span>the<span class="T1"> </span>brakes.<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">3.</span>It<span class="T1"> </span>cleans<span class="T1"> </span>up<span class="T1"> </span>a<span class="T1"> </span>hub<span class="T1"> </span>motor<span class="T1"> </span>Hall<span class="T1"> </span>effect<span class="T1"> </span>sensor<span class="T1"> </span>which<span class="T1"> </span>it<span class="T1"> </span>passes<span class="T1"> </span>on<span class="T1"> </span>to<span class="T1"> </span>C2.<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">4.</span>Provides<span class="T1"> </span>a<span class="T1"> </span>connector<span class="T1"> </span>for<span class="T1"> </span>an<span class="T1"> </span>on-board<span class="T1"> </span>joystick.<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">5.</span>May<span class="T1"> </span>be<span class="T1"> </span>expanded<span class="T1"> </span>to<span class="T1"> </span>handle<span class="T1"> </span>RC<span class="T1"> </span>control<span class="T1"> </span>signals.<span class="odfLiEnd"/> </p></li></ol><p class="Standard"> </p><p class="Standard">An<span class="T1"> </span>Arduino<span class="T1"> </span>Micro<span class="T1"> </span>(C1)<span class="T1"> </span>handles<span class="T1"> </span>emergency<span class="T1"> </span>braking,<span class="T1"> </span>and<span class="T1"> </span>may<span class="T1"> </span>take<span class="T1"> </span>care<span class="T1"> </span>of<span class="T1"> </span>other<span class="T1"> </span>functions.</p><p class="Standard"> </p><p class="Standard">The<span class="T1"> </span>power-on<span class="T1"> </span>circuit<span class="T1"> </span>is<span class="T1"> </span>meant<span class="T1"> </span>to<span class="T1"> </span>simplify<span class="T1"> </span>wiring.<span class="T1"> </span>A<span class="T1"> </span>DB15<span class="T1"> </span>cable<span class="T1"> </span>connects<span class="T1"> </span>C2<span class="T1"> </span>and<span class="T1"> </span>C1.<span class="T1"> </span>This<span class="T1"> </span>cable<span class="T1"> </span>carries<span class="T1"> </span>all<span class="T1"> </span>the<span class="T1"> </span>throttle<span class="T1"> </span>and<span class="T1"> </span>brake<span class="T1"> </span>controls<span class="T1"> </span>for<span class="T1"> </span>C2,<span class="T1"> </span>replacing<span class="T1"> </span>the<span class="T1"> </span>DB9<span class="T1"> </span>brake<span class="T1"> </span>cable<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>MegaShieldDB.<span class="T1">  </span></p><p class="Standard"> </p><p class="Standard">The<span class="T1"> </span>Kelly<span class="T1"> </span>KBS-X<span class="T1"> </span>has<span class="T1"> </span>three<span class="T1"> </span>connectors.<span class="T1"> </span>Signals<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>two<span class="T1"> </span>Kelly<span class="T1"> </span>9<span class="T1"> </span>pin<span class="T1"> </span>connectors<span class="T1"> </span>form<span class="T1"> </span>a<span class="T1"> </span>cable<span class="T1"> </span>to<span class="T1"> </span>a<span class="T1"> </span>DB-9<span class="T1"> </span>connector<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>power-on<span class="T1"> </span>PCB.<span class="T1">  </span>The<span class="T1"> </span>6<span class="T1"> </span>pin<span class="T1"> </span>connector<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>Kelly<span class="T1"> </span>goes<span class="T1"> </span>to<span class="T1"> </span>a<span class="T1"> </span>6-pin<span class="T1"> </span>phone<span class="T1"> </span>jack<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>PCB.<span class="T1"> </span>A<span class="T1"> </span>second<span class="T1"> </span>6-pin<span class="T1"> </span>phone<span class="T1"> </span>jack<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>PCB<span class="T1"> </span>connects<span class="T1"> </span>to<span class="T1"> </span>the<span class="T1"> </span>wheel.<span class="T1"> </span>It<span class="T1"> </span>does<span class="T1"> </span>not<span class="T1"> </span>matter<span class="T1"> </span>which<span class="T1"> </span>phone<span class="T1"> </span>jack<span class="T1"> </span>is<span class="T1"> </span>used.<span class="T1"> </span>A<span class="T1"> </span>Hall<span class="T1"> </span>sensor<span class="T1"> </span>signal<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>wheel<span class="T1"> </span>is<span class="T1"> </span>put<span class="T1"> </span>through<span class="T1"> </span>a<span class="T1"> </span>low<span class="T1"> </span>pass<span class="T1"> </span>filter<span class="T1"> </span>and<span class="T1"> </span>then<span class="T1"> </span>through<span class="T1"> </span>a<span class="T1"> </span>74LS07<span class="T1"> </span>buffer<span class="T1"> </span>to<span class="T1"> </span>produce<span class="T1"> </span>a<span class="T1"> </span>clean<span class="T1"> </span>signal<span class="T1"> </span>that<span class="T1"> </span>is<span class="T1"> </span>sent<span class="T1"> </span>through<span class="T1"> </span>the<span class="T1"> </span>DB-15<span class="T1"> </span>cable<span class="T1"> </span>to<span class="T1"> </span>C2.</p><p class="Standard"> </p><p class="Standard">The<span class="T1"> </span>36V<span class="T1"> </span>power<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>battery<span class="T1"> </span>enters<span class="T1"> </span>the<span class="T1"> </span>PCB<span class="T1"> </span>by<span class="T1"> </span>Anderson<span class="T1"> </span>connectors.</p><p class="Standard"> </p><p class="Standard">There<span class="T1"> </span>is<span class="T1"> </span>no<span class="T1"> </span>12V<span class="T1"> </span>power<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>board.<span class="T1"> </span>The<span class="T1"> </span>electronics<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>board<span class="T1"> </span>are<span class="T1"> </span>powered<span class="T1"> </span>by<span class="T1"> </span>the<span class="T1"> </span>5V<span class="T1"> </span>produced<span class="T1"> </span>by<span class="T1"> </span>the<span class="T1"> </span>Brake<span class="T1"> </span>servo;<span class="T1"> </span>thus<span class="T1"> </span>the<span class="T1"> </span>board<span class="T1"> </span>will<span class="T1"> </span>not<span class="T1"> </span>function<span class="T1"> </span>if<span class="T1"> </span>12V<span class="T1"> </span>is<span class="T1"> </span>not<span class="T1"> </span>turned<span class="T1"> </span>on.<span class="T1"> </span>The<span class="T1"> </span>C1<span class="T1"> </span>Arduino<span class="T1"> </span>is<span class="T1"> </span>on<span class="T1"> </span>a<span class="T1"> </span>separate<span class="T1"> </span>power<span class="T1"> </span>supply<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>other<span class="T1"> </span>Arduinos.<span class="T1"> </span>A<span class="T1"> </span>3-pin<span class="T1"> </span>servo<span class="T1"> </span>connection<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>brake<span class="T1"> </span>supplies<span class="T1"> </span>5V,<span class="T1"> </span>ground,<span class="T1"> </span>and<span class="T1"> </span>the<span class="T1"> </span>brake<span class="T1"> </span>signal.</p><p class="Standard"> </p><p class="Standard">A<span class="T1"> </span>5<span class="T1"> </span>pin<span class="T1"> </span>connector<span class="T1"> </span>provides<span class="T1"> </span>for<span class="T1"> </span>an<span class="T1"> </span>on-board<span class="T1"> </span>joystick.</p><p class="Standard"> </p><p class="Standard">C1<span class="T1"> </span>Arduino</p><p class="Standard">The<span class="T1"> </span>main<span class="T1"> </span>purpose<span class="T1"> </span>of<span class="T1"> </span>this<span class="T1"> </span>processor<span class="T1"> </span>is<span class="T1"> </span>to<span class="T1"> </span>initialize<span class="T1"> </span>a<span class="T1"> </span>line<span class="T1"> </span>(D5)<span class="T1"> </span>to<span class="T1"> </span>the<span class="T1"> </span>PCB<span class="T1"> </span>signal<span class="T1"> </span>that<span class="T1"> </span>applies<span class="T1"> </span>the<span class="T1"> </span>brakes.<span class="T1">  </span>If<span class="T1"> </span>C1<span class="T1"> </span>detects<span class="T1"> </span>an<span class="T1"> </span>e-stop<span class="T1"> </span>condition,<span class="T1"> </span>it<span class="T1"> </span>activates<span class="T1"> </span>a<span class="T1"> </span>digital<span class="T1"> </span>output<span class="T1"> </span>(D6)<span class="T1"> </span>which<span class="T1"> </span>trips<span class="T1"> </span>a<span class="T1"> </span>relay.<span class="T1"> </span>The<span class="T1"> </span>relay<span class="T1"> </span>has<span class="T1"> </span>two<span class="T1"> </span>poles;<span class="T1"> </span>one<span class="T1"> </span>removes<span class="T1"> </span>36V<span class="T1"> </span>power;<span class="T1"> </span>the<span class="T1"> </span>other<span class="T1"> </span>replaces<span class="T1"> </span>the<span class="T1"> </span>C2<span class="T1"> </span>commanded<span class="T1"> </span>braking<span class="T1"> </span>by<span class="T1"> </span>the<span class="T1"> </span>brake-on<span class="T1"> </span>PCB<span class="T1"> </span>signal.</p><p class="Standard">An<span class="T1"> </span>e-stop<span class="T1"> </span>condition<span class="T1"> </span>consists<span class="T1"> </span>of<span class="T1"> </span>either</p><ol><li><p class="P2" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">1.</span>An<span class="T1"> </span>e-stop<span class="T1"> </span>has<span class="T1"> </span>been<span class="T1"> </span>requested<span class="T1"> </span>by<span class="T1"> </span>the<span class="T1"> </span>RC<span class="T1"> </span>unit<span class="T1"> </span>or<span class="T1"> </span>by<span class="T1"> </span>C2.<span class="odfLiEnd"/> </p></li><li><p class="P2" style="margin-left:0cm;"><span style="display:block;float:left;min-width:0cm">2.</span>There<span class="T1"> </span>has<span class="T1"> </span>been<span class="T1"> </span>no<span class="T1"> </span>activity<span class="T1"> </span>from<span class="T1"> </span>C2<span class="T1"> </span>in<span class="T1"> </span>250<span class="T1"> </span>ms.<span class="odfLiEnd"/> </p></li></ol><p class="Standard">C2<span class="T1"> </span>is<span class="T1"> </span>required<span class="T1"> </span>to<span class="T1"> </span>toggle<span class="T1"> </span>the<span class="T1"> </span>WatchDog<span class="T1"> </span>Pet<span class="T1"> </span>line<span class="T1"> </span>frequently<span class="T1"> </span>to<span class="T1"> </span>show<span class="T1"> </span>that<span class="T1"> </span>it<span class="T1"> </span>is<span class="T1"> </span>still<span class="T1"> </span>alive.</p><p class="Standard"> </p><p class="Standard">A<span class="T1"> </span>secondary<span class="T1"> </span>purpose<span class="T1"> </span>of<span class="T1"> </span>C1<span class="T1"> </span>could<span class="T1"> </span>be<span class="T1"> </span>to<span class="T1"> </span>handle<span class="T1"> </span>signals<span class="T1"> </span>from<span class="T1"> </span>the<span class="T1"> </span>RC<span class="T1"> </span>unit.<span class="T1"> </span>C1<span class="T1"> </span>has<span class="T1"> </span>5<span class="T1"> </span>interrupts<span class="T1"> </span>available<span class="T1"> </span>without<span class="T1"> </span>making<span class="T1"> </span>use<span class="T1"> </span>of<span class="T1"> </span>extended<span class="T1"> </span>interrupt<span class="T1"> </span>libraries.<span class="T1"> </span>Thus<span class="T1"> </span>C1<span class="T1"> </span>can<span class="T1"> </span>straight-forwardly<span class="T1"> </span>handle<span class="T1"> </span>5<span class="T1"> </span>of<span class="T1"> </span>the<span class="T1"> </span>Spektrum's<span class="T1"> </span>6<span class="T1"> </span>channels.<span class="T1">  </span>The<span class="T1"> </span>intent<span class="T1"> </span>is<span class="T1"> </span>to<span class="T1"> </span>buy<span class="T1"> </span>a<span class="T1"> </span>second<span class="T1"> </span>Spektrum<span class="T1"> </span>controller<span class="T1"> </span>to<span class="T1"> </span>make<span class="T1"> </span>both<span class="T1"> </span>trikes<span class="T1"> </span>the<span class="T1"> </span>same.<span class="T1">  </span>If<span class="T1"> </span>RC<span class="T1"> </span>processing<span class="T1"> </span>is<span class="T1"> </span>done<span class="T1"> </span>on<span class="T1"> </span>C1,<span class="T1"> </span>it<span class="T1"> </span>would<span class="T1"> </span>use<span class="T1"> </span>a<span class="T1"> </span>DAC<span class="T1"> </span>to<span class="T1"> </span>send<span class="T1"> </span>Motion<span class="T1"> </span>and<span class="T1"> </span>Steering<span class="T1"> </span>as<span class="T1"> </span>analog<span class="T1"> </span>signals<span class="T1"> </span>(same<span class="T1"> </span>as<span class="T1"> </span>the<span class="T1"> </span>joystick).<span class="T1"> </span>It<span class="T1"> </span>would<span class="T1"> </span>also<span class="T1"> </span>have<span class="T1"> </span>digital<span class="T1"> </span>lines<span class="T1"> </span>for<span class="T1"> </span>e-stop<span class="T1"> </span>and<span class="T1"> </span>forward/reverse.<span class="T1"> </span>Thus<span class="T1"> </span>the<span class="T1"> </span>RC<span class="T1"> </span>controller<span class="T1"> </span>would<span class="T1"> </span>effectively<span class="T1"> </span>be<span class="T1"> </span>limited<span class="T1"> </span>to<span class="T1"> </span>4<span class="T1"> </span>channels.</p><p class="Standard">The<span class="T1"> </span>components<span class="T1"> </span>for<span class="T1"> </span>the<span class="T1"> </span>board<span class="T1"> </span>are<span class="T1"> </span>physically<span class="T1"> </span>large.<span class="T1"> </span>The<span class="T1"> </span>relay<span class="T1"> </span>in<span class="T1"> </span>the<span class="T1"> </span>upper<span class="T1"> </span>right<span class="T1"> </span>corner<span class="T1"> </span>of<span class="T1"> </span>the<span class="T1"> </span>board<span class="T1"> </span>layout<span class="T1"> </span>is<span class="T1"> </span>bigger<span class="T1"> </span>than<span class="T1"> </span>the<span class="T1"> </span>package<span class="T1"> </span>shown;<span class="T1"> </span>it<span class="T1"> </span>occupies<span class="T1"> </span>most<span class="T1"> </span>of<span class="T1"> </span>the<span class="T1"> </span>blank<span class="T1"> </span>corner<span class="T1"> </span>area.<span class="T1"> </span>We<span class="T1"> </span>will<span class="T1"> </span>need<span class="T1"> </span>to<span class="T1"> </span>verify<span class="T1"> </span>correct<span class="T1"> </span>packages<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>board.<span class="T1"> </span>Most<span class="T1"> </span>components<span class="T1"> </span>will<span class="T1"> </span>be<span class="T1"> </span>mounted<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>front.<span class="T1"> </span>The<span class="T1"> </span>power<span class="T1"> </span>switch<span class="T1"> </span>will<span class="T1"> </span>be<span class="T1"> </span>located<span class="T1"> </span>on<span class="T1"> </span>the<span class="T1"> </span>back,<span class="T1"> </span>so<span class="T1"> </span>that<span class="T1"> </span>the<span class="T1"> </span>board<span class="T1"> </span>can<span class="T1"> </span>be<span class="T1"> </span>mounted<span class="T1"> </span>with<span class="T1"> </span>the<span class="T1"> </span>switch<span class="T1"> </span>in<span class="T1"> </span>a<span class="T1"> </span>good<span class="T1"> </span>position.</p><p class="Standard">The<span class="T1"> </span>74LS07<span class="T1"> </span>needs<span class="T1"> </span>to<span class="T1"> </span>have<span class="T1"> </span>5V<span class="T1"> </span>and<span class="T1"> </span>GND<span class="T1"> </span>connected;<span class="T1"> </span>it<span class="T1"> </span>is<span class="T1"> </span>not<span class="T1"> </span>clear<span class="T1"> </span>how<span class="T1"> </span>to<span class="T1"> </span>do<span class="T1"> </span>so<span class="T1"> </span>in<span class="T1"> </span>Eagle<span class="T1"> </span>CAD.</p><p class="Standard">Some test points should be added.</p><p class="Standard"> </p></body></html>
